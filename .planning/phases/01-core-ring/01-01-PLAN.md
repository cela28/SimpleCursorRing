---
phase: 01-core-ring
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - SimpleCursorRing/SimpleCursorRing.toc
  - SimpleCursorRing/Core.lua
  - SimpleCursorRing/Textures/Ring.tga
autonomous: true

must_haves:
  truths:
    - "Ring texture displays centered on cursor position"
    - "Ring follows cursor smoothly as mouse moves"
    - "Addon loads without errors in WoW client"
  artifacts:
    - path: "SimpleCursorRing/SimpleCursorRing.toc"
      provides: "Addon metadata and file load order"
      contains: "## Interface: 120000"
    - path: "SimpleCursorRing/Core.lua"
      provides: "Frame creation and cursor tracking"
      contains: "GetCursorPosition"
    - path: "SimpleCursorRing/Textures/Ring.tga"
      provides: "Ring texture asset"
  key_links:
    - from: "SimpleCursorRing/SimpleCursorRing.toc"
      to: "SimpleCursorRing/Core.lua"
      via: "file load directive"
      pattern: "Core\\.lua"
    - from: "SimpleCursorRing/Core.lua"
      to: "Textures/Ring"
      via: "SetTexture call"
      pattern: "SetTexture.*Ring"
---

<objective>
Create the foundational WoW addon structure with a ring texture that follows the cursor.

Purpose: Establish the addon skeleton (TOC, Lua, texture) and implement RING-01 (ring displays and follows cursor). This is the foundation all customization features build on.

Output: A working addon that displays a ring centered on the cursor at all times.
</objective>

<execution_context>
@/home/sntanavaras/.claude/get-shit-done/workflows/execute-plan.md
@/home/sntanavaras/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-core-ring/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create addon structure and TOC file</name>
  <files>
    SimpleCursorRing/SimpleCursorRing.toc
    SimpleCursorRing/Textures/Ring.tga
  </files>
  <action>
    Create the addon folder structure:
    - SimpleCursorRing/ (addon root)
    - SimpleCursorRing/Textures/ (texture assets)

    Create SimpleCursorRing.toc with:
    - ## Interface: 120000 (Patch 12.0.0 Midnight)
    - ## Title: SimpleCursorRing
    - ## Notes: Displays a customizable ring around the mouse cursor
    - ## Author: (user's name or blank)
    - ## Version: 1.0.0
    - ## SavedVariables: SimpleCursorRingSaved (for Plan 02)
    - Core.lua (file to load)

    For the ring texture:
    - Download or create a simple ring texture
    - EnhanceQoL source has Mouse.tga at Assets/Mouse/ - check if accessible
    - If not accessible, create a simple 64x64 TGA ring texture (white ring on transparent background)
    - Texture MUST be power-of-2 dimensions (64x64, 128x128)
    - Save as Ring.tga in Textures/

    IMPORTANT: Folder name MUST match .toc filename exactly (SimpleCursorRing.toc in SimpleCursorRing/)
  </action>
  <verify>
    - ls SimpleCursorRing/ shows SimpleCursorRing.toc and Textures/Ring.tga
    - cat SimpleCursorRing/SimpleCursorRing.toc shows Interface: 120000
    - file SimpleCursorRing/Textures/Ring.tga confirms TGA format
  </verify>
  <done>
    - TOC file exists with correct interface version and SavedVariables declaration
    - Ring.tga texture exists with power-of-2 dimensions
    - Folder structure matches WoW addon requirements
  </done>
</task>

<task type="auto">
  <name>Task 2: Implement cursor-following ring frame</name>
  <files>SimpleCursorRing/Core.lua</files>
  <action>
    Create Core.lua implementing the cursor-following ring:

    1. Create main frame:
       - local frame = CreateFrame("Frame", "SimpleCursorRingFrame", UIParent)
       - frame:SetSize(64, 64) (default size, will be customizable in Plan 02)
       - frame:SetFrameStrata("HIGH") (above most UI, below tooltips)
       - frame:SetFrameLevel(100)

    2. Create texture on frame:
       - local texture = frame:CreateTexture(nil, "ARTWORK")
       - texture:SetTexture("Interface\\AddOns\\SimpleCursorRing\\Textures\\Ring")
       - texture:SetAllPoints(frame)
       - texture:SetVertexColor(1, 1, 1, 1) (white, full opacity - default)

    3. Implement throttled OnUpdate for cursor following:
       - Use elapsed time accumulation pattern from research
       - UPDATE_INTERVAL = 0.01 (100 Hz for smooth tracking)
       - Get cursor position with GetCursorPosition()
       - CRITICAL: Divide by UIParent:GetEffectiveScale() for proper positioning
       - Use ClearAllPoints() then SetPoint("CENTER", UIParent, "BOTTOMLEFT", x/scale, y/scale)

    4. Show the frame:
       - frame:Show()

    Pattern from research (01-RESEARCH.md):
    ```lua
    local UPDATE_INTERVAL = 0.01
    local function OnUpdate(self, elapsed)
        self.timeSinceLastUpdate = (self.timeSinceLastUpdate or 0) + elapsed
        while self.timeSinceLastUpdate > UPDATE_INTERVAL do
            local x, y = GetCursorPosition()
            local scale = UIParent:GetEffectiveScale()
            self:ClearAllPoints()
            self:SetPoint("CENTER", UIParent, "BOTTOMLEFT", x/scale, y/scale)
            self.timeSinceLastUpdate = self.timeSinceLastUpdate - UPDATE_INTERVAL
        end
    end
    ```

    AVOID:
    - Unthrottled OnUpdate (causes performance issues)
    - Using GetCursorPosition() without scale division (breaks at non-100% UI scale)
    - Global variables without addon namespace (namespace pollution)
  </action>
  <verify>
    - cat SimpleCursorRing/Core.lua shows CreateFrame, SetTexture, GetCursorPosition
    - grep -c "GetEffectiveScale" SimpleCursorRing/Core.lua returns 1+ (scale handling present)
    - grep -c "OnUpdate" SimpleCursorRing/Core.lua returns 1+ (update handler present)
  </verify>
  <done>
    - Core.lua creates frame with ring texture
    - Cursor tracking uses throttled OnUpdate with proper scale conversion
    - Frame positioned at HIGH strata for visibility
    - Addon ready to test in WoW (ring follows cursor)
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. File structure check:
   ```
   SimpleCursorRing/
   ├── SimpleCursorRing.toc
   ├── Core.lua
   └── Textures/
       └── Ring.tga
   ```

2. TOC validity:
   - Contains ## Interface: 120000
   - Contains ## SavedVariables: SimpleCursorRingSaved
   - Lists Core.lua

3. Core.lua validity:
   - Creates frame with CreateFrame()
   - Sets texture with correct path
   - Implements throttled OnUpdate
   - Uses GetCursorPosition() / GetEffectiveScale()
</verification>

<success_criteria>
- RING-01 complete: Ring displays and follows cursor
- Addon structure valid for WoW to load
- No Lua errors in code (syntax valid)
- Foundation ready for Plan 02 (Settings/customization)
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-ring/01-01-SUMMARY.md`
</output>
